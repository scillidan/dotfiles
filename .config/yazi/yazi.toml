[mgr]
show_hidden = true

[plugin]
prepend_preloaders = [
  # https://github.com/boydaihungst/mediainfo.yazi
  { mime = "{audio,video,image}/*", run = "mediainfo" },
  { mime = "application/subrip", run = "mediainfo" },
  { mime = "application/postscript", run = "mediainfo" },
  # https://github.com/wylie102/duckdb.yazi
  # { name = "*.csv", run = "duckdb", multi = false },
  # { name = "*.tsv", run = "duckdb", multi = false },
  # { name = "*.json", run = "duckdb", multi = false },
  # { name = "*.parquet", run = "duckdb", multi = false },
  # { name = "*.txt", run = "duckdb", multi = false },
  # { name = "*.xlsx", run = "duckdb", multi = false },
  # https://github.com/macydnah/office.yazi
  { mime = "application/openxmlformats-officedocument.*", run = "office" },
  { mime = "application/oasis.opendocument.*", run = "office" },
  { mime = "application/ms-*", run = "office" },
  { mime = "application/msword", run = "office" },
  { name = "*.docx", run = "office" },
]
prepend_previewers = [
  # https://github.com/yazi-rs/plugins/tree/main/piper.yazi
  { name = "*.md", run = 'piper -- CLICOLOR_FORCE=1 glow -w=$w -s=dark "$1"' },
  { name = "*.csv", run = 'piper -- bat -p --color=always "$1"' },
  { name = "*/", run = 'piper -- eza -TL=3 --color=always --icons=always --group-directories-first --no-quotes "$1"' },
  # { name = "*", run = 'piper -- hexyl --border=none --terminal-width=$w "$1"' },
  # https://github.com/kirasok/epub-preview.yazi?tab=readme-ov-file
  { mime = "application/epub+zip", run = "epub-preview" },
  # https://github.com/boydaihungst/mediainfo.yazi
  { mime = "{audio,video,image}/*", run = "mediainfo" },
  { mime = "application/subrip", run = "mediainfo" },
  { mime = "application/postscript", run = "mediainfo" },
  # https://github.com/wylie102/duckdb.yazi
  # { name = "*.csv", run = "duckdb" },
  # { name = "*.tsv", run = "duckdb" },
  # { name = "*.json", run = "duckdb" },
  # { name = "*.parquet", run = "duckdb" },
  # { name = "*.txt", run = "duckdb" },
  # { name = "*.xlsx", run = "duckdb" },
  # { name = "*.db", run = "duckdb" },
  # { name = "*.duckdb", run = "duckdb" },
  # https://github.com/macydnah/office.yazi
  { mime = "application/openxmlformats-officedocument.*", run = "office" },
  { mime = "application/oasis.opendocument.*", run = "office" },
  { mime = "application/ms-*", run = "office" },
  { mime = "application/msword", run = "office" },
  { name = "*.docx", run = "office" },
]

[tasks]
image_alloc = 1073741824 # = 1024*1024*1024 = 1024MB
